<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Navigation et Footer</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .debug-info {
            margin: 1rem 0;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #f8f9fa;
        }
        .success { border-color: #28a745; background: #d4edda; }
        .error { border-color: #dc3545; background: #f8d7da; }
        .warning { border-color: #ffc107; background: #fff3cd; }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1>üîç Debug Navigation et Footer</h1>
        
        <div id="debug-results"></div>
        
        <button onclick="debugComponents()" class="btn btn-primary">üîÑ Tester Composants</button>
        <button onclick="forceLoadComponents()" class="btn btn-success">‚ö° Forcer Chargement</button>
        
        <!-- Conteneurs de test -->
        <div id="navigation" style="border: 2px dashed #007bff; margin: 2rem 0; min-height: 50px;">
            <p style="text-align: center; color: #007bff; margin: 1rem;">Zone Navigation (sera remplac√©e)</p>
        </div>
        
        <div id="ftco-footer" style="border: 2px dashed #28a745; margin: 2rem 0; min-height: 50px;">
            <p style="text-align: center; color: #28a745; margin: 1rem;">Zone Footer (sera remplac√©e)</p>
        </div>
    </div>

    <!-- Scripts dans le bon ordre -->
    <script src="js/globalData.js"></script>
    <script src="js/translationDictionary.js"></script>
    <script src="js/smartTranslator.js"></script>
    <script src="js/components.js"></script>
    
    <script>
        function debugComponents() {
            const results = document.getElementById('debug-results');
            let html = '<h2>üìä Diagnostic des Composants</h2>';
            
            // Test 1: V√©rification des √©l√©ments DOM
            const navElement = document.getElementById('navigation');
            const footerElement = document.getElementById('ftco-footer');
            
            html += `<div class="debug-info ${navElement ? 'success' : 'error'}">
                ${navElement ? '‚úÖ' : '‚ùå'} <strong>√âl√©ment #navigation</strong>: ${navElement ? 'Trouv√©' : 'Non trouv√©'}
            </div>`;
            
            html += `<div class="debug-info ${footerElement ? 'success' : 'error'}">
                ${footerElement ? '‚úÖ' : '‚ùå'} <strong>√âl√©ment #ftco-footer</strong>: ${footerElement ? 'Trouv√©' : 'Non trouv√©'}
            </div>`;
            
            // Test 2: V√©rification des fonctions
            const loadNavAvailable = typeof window.loadNavigation === 'function';
            const loadFooterAvailable = typeof window.loadFooter === 'function';
            
            html += `<div class="debug-info ${loadNavAvailable ? 'success' : 'error'}">
                ${loadNavAvailable ? '‚úÖ' : '‚ùå'} <strong>window.loadNavigation</strong>: ${typeof window.loadNavigation}
            </div>`;
            
            html += `<div class="debug-info ${loadFooterAvailable ? 'success' : 'error'}">
                ${loadFooterAvailable ? '‚úÖ' : '‚ùå'} <strong>window.loadFooter</strong>: ${typeof window.loadFooter}
            </div>`;
            
            // Test 3: V√©rification de globalData
            const globalDataOk = window.globalData && window.globalData.navigation;
            html += `<div class="debug-info ${globalDataOk ? 'success' : 'error'}">
                ${globalDataOk ? '‚úÖ' : '‚ùå'} <strong>globalData.navigation</strong>: ${globalDataOk ? 'Disponible' : 'Non disponible'}
            </div>`;
            
            // Test 4: V√©rification des traductions
            const translationsOk = typeof window.getTranslations === 'function';
            html += `<div class="debug-info ${translationsOk ? 'success' : 'error'}">
                ${translationsOk ? '‚úÖ' : '‚ùå'} <strong>window.getTranslations</strong>: ${typeof window.getTranslations}
            </div>`;
            
            if (translationsOk) {
                try {
                    const navTranslations = window.getTranslations('navigation');
                    html += `<div class="debug-info ${navTranslations ? 'success' : 'warning'}">
                        ${navTranslations ? '‚úÖ' : '‚ö†Ô∏è'} <strong>Navigation traduite</strong>: ${navTranslations ? navTranslations.length + ' √©l√©ments' : 'Non disponible'}
                    </div>`;
                } catch (error) {
                    html += `<div class="debug-info error">
                        ‚ùå <strong>Erreur traductions</strong>: ${error.message}
                    </div>`;
                }
            }
            
            // Test 5: Contenu actuel des conteneurs
            if (navElement) {
                const navContent = navElement.innerHTML.trim();
                html += `<div class="debug-info ${navContent.includes('navbar') ? 'success' : 'warning'}">
                    üìã <strong>Contenu navigation</strong>: ${navContent ? 'Pr√©sent (' + navContent.length + ' chars)' : 'Vide'}
                </div>`;
            }
            
            if (footerElement) {
                const footerContent = footerElement.innerHTML.trim();
                html += `<div class="debug-info ${footerContent.includes('ftco-footer') ? 'success' : 'warning'}">
                    üìã <strong>Contenu footer</strong>: ${footerContent ? 'Pr√©sent (' + footerContent.length + ' chars)' : 'Vide'}
                </div>`;
            }
            
            results.innerHTML = html;
            console.log('üîç Diagnostic termin√©');
        }
        
        function forceLoadComponents() {
            console.log('‚ö° For√ßage du chargement des composants...');
            
            try {
                if (typeof window.loadNavigation === 'function') {
                    window.loadNavigation();
                    console.log('‚úÖ Navigation forc√©e');
                } else {
                    console.error('‚ùå loadNavigation non disponible');
                }
                
                if (typeof window.loadFooter === 'function') {
                    window.loadFooter();
                    console.log('‚úÖ Footer forc√©');
                } else {
                    console.error('‚ùå loadFooter non disponible');
                }
                
                // Re-diagnostic apr√®s chargement forc√©
                setTimeout(debugComponents, 500);
                
            } catch (error) {
                console.error('‚ùå Erreur lors du for√ßage:', error);
            }
        }
        
        // Auto-diagnostic au chargement
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(debugComponents, 1000);
        });
        
        // √âcouter l'√©v√©nement globalDataReady
        window.addEventListener('globalDataReady', function(e) {
            console.log('üì¢ √âv√©nement globalDataReady re√ßu dans debug:', e.detail);
            setTimeout(debugComponents, 500);
        });
    </script>
</body>
</html>
