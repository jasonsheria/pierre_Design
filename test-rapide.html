<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Rapide - Fonctions Globales</title>
    <style>
        body {
            font-family: 'Open Sans', Arial, sans-serif;
            margin: 2rem;
            line-height: 1.6;
        }
        .test-result {
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 5px;
            border-left: 4px solid #007bff;
            background-color: #f8f9fa;
        }
        .success { border-left-color: #28a745; background-color: #d4edda; }
        .error { border-left-color: #dc3545; background-color: #f8d7da; }
        .warning { border-left-color: #ffc107; background-color: #fff3cd; }
        code {
            background-color: #e9ecef;
            padding: 2px 4px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <h1>üß™ Test Rapide - Fonctions Globales</h1>
    <div id="results"></div>
    
    <button onclick="runTests()" style="margin-top: 2rem; padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
        üîÑ Relancer les Tests
    </button>

    <!-- Scripts -->
    <script src="js/globalData.js"></script>
    <script>
        function runTests() {
            console.clear();
            console.log('üöÄ Test rapide des fonctions globales');
            
            const results = document.getElementById('results');
            let html = '';
            
            // Test 1: V√©rification de window.globalData
            try {
                if (window.globalData) {
                    html += `<div class="test-result success">‚úÖ <strong>window.globalData</strong> existe</div>`;
                    console.log('‚úÖ window.globalData existe');
                } else {
                    html += `<div class="test-result error">‚ùå <strong>window.globalData</strong> n'existe pas</div>`;
                    console.log('‚ùå window.globalData n\'existe pas');
                }
            } catch (error) {
                html += `<div class="test-result error">‚ùå Erreur lors de la v√©rification de window.globalData: ${error.message}</div>`;
                console.error('‚ùå Erreur window.globalData:', error);
            }
            
            // Test 2: V√©rification des fonctions
            const functionsToTest = [
                'getGlobalData', 'getTheme', 'getThemeColor', 'getThemeSpacing', 
                'getThemeFont', 'getCurrentLanguage', 'setCurrentLanguage', 'getLocalizedData'
            ];
            
            functionsToTest.forEach(funcName => {
                try {
                    if (typeof window[funcName] === 'function') {
                        html += `<div class="test-result success">‚úÖ <strong>${funcName}</strong> disponible</div>`;
                        console.log(`‚úÖ ${funcName} disponible`);
                    } else {
                        html += `<div class="test-result error">‚ùå <strong>${funcName}</strong> non disponible (type: ${typeof window[funcName]})</div>`;
                        console.log(`‚ùå ${funcName} non disponible`);
                    }
                } catch (error) {
                    html += `<div class="test-result error">‚ùå Erreur lors du test de ${funcName}: ${error.message}</div>`;
                    console.error(`‚ùå Erreur ${funcName}:`, error);
                }
            });
            
            // Test 3: Test fonctionnel
            try {
                const theme = window.getTheme();
                if (theme && theme.colors) {
                    html += `<div class="test-result success">‚úÖ <strong>getTheme()</strong> retourne des donn√©es valides</div>`;
                    console.log('‚úÖ getTheme() fonctionne:', theme);
                } else {
                    html += `<div class="test-result warning">‚ö†Ô∏è <strong>getTheme()</strong> ne retourne pas de donn√©es valides</div>`;
                    console.log('‚ö†Ô∏è getTheme() probl√®me:', theme);
                }
            } catch (error) {
                html += `<div class="test-result error">‚ùå Erreur lors de l'appel getTheme(): ${error.message}</div>`;
                console.error('‚ùå Erreur getTheme():', error);
            }
            
            // Test 4: Test couleur
            try {
                const primaryColor = window.getThemeColor('primary');
                if (primaryColor) {
                    html += `<div class="test-result success">‚úÖ <strong>getThemeColor('primary')</strong> retourne: <code>${primaryColor}</code></div>`;
                    console.log('‚úÖ getThemeColor("primary"):', primaryColor);
                } else {
                    html += `<div class="test-result warning">‚ö†Ô∏è <strong>getThemeColor('primary')</strong> ne retourne pas de couleur</div>`;
                    console.log('‚ö†Ô∏è getThemeColor("primary") probl√®me');
                }
            } catch (error) {
                html += `<div class="test-result error">‚ùå Erreur lors de l'appel getThemeColor('primary'): ${error.message}</div>`;
                console.error('‚ùå Erreur getThemeColor():', error);
            }
            
            // Test 5: Test langue
            try {
                const currentLang = window.getCurrentLanguage();
                if (currentLang) {
                    html += `<div class="test-result success">‚úÖ <strong>getCurrentLanguage()</strong> retourne: <code>${currentLang}</code></div>`;
                    console.log('‚úÖ getCurrentLanguage():', currentLang);
                } else {
                    html += `<div class="test-result warning">‚ö†Ô∏è <strong>getCurrentLanguage()</strong> ne retourne pas de langue</div>`;
                    console.log('‚ö†Ô∏è getCurrentLanguage() probl√®me');
                }
            } catch (error) {
                html += `<div class="test-result error">‚ùå Erreur lors de l'appel getCurrentLanguage(): ${error.message}</div>`;
                console.error('‚ùå Erreur getCurrentLanguage():', error);
            }
            
            results.innerHTML = html;
            console.log('üèÅ Tests termin√©s');
        }
        
        // Ex√©cuter les tests automatiquement au chargement
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM charg√©');
            setTimeout(runTests, 500);
        });
        
        // Si le DOM est d√©j√† charg√©
        if (document.readyState !== 'loading') {
            console.log('üìÑ DOM d√©j√† charg√©');
            setTimeout(runTests, 500);
        }
    </script>
</body>
</html>
